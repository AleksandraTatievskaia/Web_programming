<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥</title>
</head>
<body>
    <h1>–°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥</h1>

    <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
    {% if user.is_authenticated %}
        <p>–ü—Ä–∏–≤–µ—Ç, {{ user.username }}!</p>
        <a href="{% url 'add_book' %}">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç</a>  <!-- –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º -->
        <a href="{% url 'cart' %}" style="float: right;">üõí –ú–æ—è –∫–æ—Ä–∑–∏–Ω–∞</a>  <!-- –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ—Ä–∑–∏–Ω—É -->

        <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –∑–∞–∫–∞–∑–∞–º–∏ -->
        <a href="{% url 'orders' %}" style="float: right; margin-right: 10px;">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</a> <!-- –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∑–∞–∫–∞–∑–æ–≤ -->

        <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è) -->
        <a href="{% url 'edit_profile' %}" style="float: right; margin-right: 10px;">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>  <!-- –°—Å—ã–ª–∫–∞ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è -->
    {% else %}
        <p>–í—ã –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, <a href="{% url 'login' %}">–≤–æ–π–¥–∏—Ç–µ</a> –∏–ª–∏ <a href="{% url 'register' %}">–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</a>.</p>
    {% endif %}

    <!-- –°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ -->
    <ul>
        {% for book in page_obj %}
            <li>
                {{ book.title }} - {{ book.author }} ({{ book.price }} $)

                {% if user.is_authenticated %}
                    <a href="{% url 'add_to_cart' book.id %}">üõí –ü–æ–ª–æ–∂–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</a>  <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É -->
                {% endif %}

                {% if user.is_authenticated and user.role == 'admin' %}
                    <a href="{% url 'edit_book' book.id %}">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    <a href="{% url 'delete_book' book.id %}">–£–¥–∞–ª–∏—Ç—å</a>
                {% endif %}
            </li>
        {% empty %}
            <li>–ö–Ω–∏–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</li>
        {% endfor %}
    </ul>

    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
    <div>
        <span class="step-links">
            {% if page_obj.has_previous %}
                <a href="?page=1">&laquo; –ö –Ω–∞—á–∞–ª—É</a>
                <a href="?page={{ page_obj.previous_page_number }}">–ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
            {% endif %}

            <span class="current">
                –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}.
            </span>

            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}">–°–ª–µ–¥—É—é—â–∞—è</a>
                <a href="?page={{ page_obj.paginator.num_pages }}">–ü–æ—Å–ª–µ–¥–Ω—è—è &raquo;</a>
            {% endif %}
        </span>
    </div>

    {% if user.is_authenticated %}
        <a href="{% url 'logout' %}">–í—ã—Ö–æ–¥</a>
    {% endif %}

</body>
</html>
